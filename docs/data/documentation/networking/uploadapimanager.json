{"relationshipsSections":[{"type":"inheritsFrom","identifiers":["doc:\/\/Networking\/objc(cs)NSObject"],"title":"Inherits From","kind":"relationships"},{"type":"conformsTo","identifiers":["doc:\/\/Networking\/objc(pl)NSURLSessionDataDelegate","doc:\/\/Networking\/objc(pl)NSURLSessionDelegate","doc:\/\/Networking\/objc(pl)NSURLSessionTaskDelegate","doc:\/\/Networking\/objc(pl)NSObject","doc:\/\/Networking\/s7CVarArgP","doc:\/\/Networking\/s28CustomDebugStringConvertibleP","doc:\/\/Networking\/s23CustomStringConvertibleP","doc:\/\/Networking\/SQ","doc:\/\/Networking\/SH","doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging"],"kind":"relationships","title":"Conforms To"}],"schemaVersion":{"minor":3,"major":0,"patch":0},"kind":"symbol","abstract":[{"text":"Default upload API manager which is responsible for the creation and management of network file uploads.","type":"text"}],"metadata":{"navigatorTitle":[{"kind":"identifier","text":"UploadAPIManager"}],"symbolKind":"class","title":"UploadAPIManager","role":"symbol","externalID":"c:@M@Networking@objc(cs)UploadAPIManager","platforms":[{"deprecated":false,"name":"iOS","unavailable":false,"beta":false,"introducedAt":"15.0"}],"modules":[{"name":"Networking"}],"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"UploadAPIManager","kind":"identifier"}],"roleHeading":"Class"},"hierarchy":{"paths":[["doc:\/\/Networking\/documentation\/Networking"]]},"sections":[],"topicSections":[{"title":"Initializers","identifiers":["doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/init(urlSessionConfiguration:multipartFormDataEncoder:fileManager:requestAdapters:responseProcessors:errorProcessors:)"]},{"title":"Instance Properties","identifiers":["doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/activeTasks"]},{"title":"Default Implementations","generated":true,"identifiers":["doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/URLSessionDataDelegate-Implementations","doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/URLSessionTaskDelegate-Implementations","doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/UploadAPIManaging-Implementations"]}],"variants":[{"paths":["\/documentation\/networking\/uploadapimanager"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"UploadAPIManager","kind":"identifier"}]}]},{"kind":"content","content":[{"text":"Overview","level":2,"anchor":"overview","type":"heading"},{"inlineContent":[{"type":"text","text":"You can define your own custom "},{"code":"UploadAPIManager","type":"codeVoice"},{"type":"text","text":" if needed by conforming to "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging"},{"type":"text","text":"."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The initialisation is similar to "},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/APIManager\/init(urlSession:requestAdapters:responseProcessors:errorProcessors:)","isActive":true,"type":"reference"},{"type":"text","text":", except the session is created for the user based on a given "},{"code":"URLSessionConfiguration","type":"codeVoice"},{"type":"text","text":" + you can also inject "},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/MultipartFormDataEncoding","type":"reference","isActive":true},{"type":"text","text":" and "},{"type":"codeVoice","code":"FileManager"},{"text":"  ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/init(urlSessionConfiguration:multipartFormDataEncoder:fileManager:requestAdapters:responseProcessors:errorProcessors:)"},{"type":"text","text":"."}]},{"text":"Usage","level":2,"type":"heading","anchor":"Usage"},{"items":[{"content":[{"inlineContent":[{"text":"Start a download by calling the ","type":"text"},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/upload(_:to:)","isActive":true},{"type":"text","text":" function and passing "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadType"},{"type":"text","text":" which defines three types of possible resources for upload "},{"type":"codeVoice","code":"Data"},{"text":", file ","type":"text"},{"code":"URL","type":"codeVoice"},{"type":"text","text":" and "},{"identifier":"doc:\/\/Networking\/documentation\/Networking\/MultipartFormData","isActive":true,"type":"reference"},{"type":"text","text":". It returns an "},{"type":"codeVoice","code":"UploadTask"},{"type":"text","text":", which is a struct that under the hood represents + manages a URLSessionUploadTask and provides its state."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/activeTasks","type":"reference"},{"text":" property enables you to keep track of current tasks in progress.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to observe progress of a specific task you can obtain a "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging\/StateStream"},{"text":" which is an ","type":"text"},{"code":"AsyncPublisher","type":"codeVoice"},{"text":" of ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadTask\/State"},{"type":"text","text":" with "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/stateStream(for:)"},{"text":".","type":"text"}]}]}],"type":"orderedList"},{"type":"codeListing","syntax":"swift","code":["for await uploadState in await uploadManager.stateStream(for: task.id) {","...","}"]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You can retry a specific task in case of failure with "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/retry(taskId:)"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"In case you are not using a singleton instance don’t forget to call "},{"type":"reference","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/invalidateSession(shouldFinishTasks:)","isActive":true},{"text":" once the instance is not needed anymore in order to prevent memory leaks, since the ","type":"text"},{"code":"UploadAPIManager","type":"codeVoice"},{"text":" is not automatically deallocated from memory because of a ","type":"text"},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" holding a reference to it."}],"type":"paragraph"}]}],"type":"orderedList","start":4}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager"},"references":{"doc://Networking/documentation/Networking/UploadAPIManager/UploadAPIManaging-Implementations":{"role":"collectionGroup","url":"\/documentation\/networking\/uploadapimanager\/uploadapimanaging-implementations","abstract":[],"kind":"article","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/UploadAPIManaging-Implementations","title":"UploadAPIManaging Implementations","type":"topic"},"doc://Networking/documentation/Networking/UploadAPIManager/activeTasks":{"abstract":[],"title":"activeTasks","role":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"activeTasks","kind":"identifier"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:10Networking10UploadTaskV","kind":"typeIdentifier","text":"UploadTask"},{"text":"]","kind":"text"}],"type":"topic","url":"\/documentation\/networking\/uploadapimanager\/activetasks","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/activeTasks","kind":"symbol"},"doc://Networking/documentation/Networking/MultipartFormData":{"type":"topic","navigatorTitle":[{"text":"MultipartFormData","kind":"identifier"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"MultipartFormData","kind":"identifier"}],"title":"MultipartFormData","abstract":[{"type":"text","text":"The "},{"code":"MultipartFormData","type":"codeVoice"},{"text":" class provides a convenient way to handle multipart form data.","type":"text"},{"type":"text","text":" "},{"text":"It allows you to construct a multipart form data payload by adding multiple body parts, each representing a separate piece of data.","type":"text"}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/MultipartFormData","url":"\/documentation\/networking\/multipartformdata","role":"symbol"},"doc://Networking/documentation/Networking/APIManager/init(urlSession:requestAdapters:responseProcessors:errorProcessors:)":{"abstract":[],"role":"symbol","url":"\/documentation\/networking\/apimanager\/init(urlsession:requestadapters:responseprocessors:errorprocessors:)","type":"topic","identifier":"doc:\/\/Networking\/documentation\/Networking\/APIManager\/init(urlSession:requestAdapters:responseProcessors:errorProcessors:)","title":"init(urlSession:requestAdapters:responseProcessors:errorProcessors:)","fragments":[{"text":"init","kind":"identifier"},{"kind":"text","text":"("},{"text":"urlSession","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSURLSession","text":"URLSession"},{"kind":"text","text":", "},{"kind":"externalParam","text":"requestAdapters"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"RequestAdapting","preciseIdentifier":"s:10Networking15RequestAdaptingP"},{"text":"], ","kind":"text"},{"kind":"externalParam","text":"responseProcessors"},{"text":": [","kind":"text"},{"kind":"typeIdentifier","text":"ResponseProcessing","preciseIdentifier":"s:10Networking18ResponseProcessingP"},{"text":"], ","kind":"text"},{"text":"errorProcessors","kind":"externalParam"},{"kind":"text","text":": ["},{"text":"ErrorProcessing","kind":"typeIdentifier","preciseIdentifier":"s:10Networking15ErrorProcessingP"},{"kind":"text","text":"])"}],"kind":"symbol"},"doc://Networking/documentation/Networking/UploadAPIManager/URLSessionTaskDelegate-Implementations":{"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/URLSessionTaskDelegate-Implementations","url":"\/documentation\/networking\/uploadapimanager\/urlsessiontaskdelegate-implementations","type":"topic","kind":"article","title":"URLSessionTaskDelegate Implementations","abstract":[],"role":"collectionGroup"},"doc://Networking/documentation/Networking/UploadAPIManager/stateStream(for:)":{"role":"symbol","url":"\/documentation\/networking\/uploadapimanager\/statestream(for:)","abstract":[],"kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"stateStream"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"for"},{"text":": ","kind":"text"},{"text":"UploadTask","kind":"typeIdentifier","preciseIdentifier":"s:10Networking10UploadTaskV"},{"kind":"text","text":"."},{"preciseIdentifier":"s:10Networking10UploadTaskV2IDa","text":"ID","kind":"typeIdentifier"},{"kind":"text","text":") "},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"UploadAPIManager","kind":"typeIdentifier","preciseIdentifier":"c:@M@Networking@objc(cs)UploadAPIManager"},{"text":".","kind":"text"},{"text":"StateStream","preciseIdentifier":"s:10Networking17UploadAPIManagingP11StateStreama","kind":"typeIdentifier"}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/stateStream(for:)","title":"stateStream(for:)","type":"topic"},"doc://Networking/documentation/Networking/UploadAPIManager/upload(_:to:)":{"abstract":[],"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/upload(_:to:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"upload","kind":"identifier"},{"kind":"text","text":"("},{"text":"UploadType","kind":"typeIdentifier","preciseIdentifier":"s:10Networking10UploadTypeO"},{"kind":"text","text":", "},{"text":"to","kind":"externalParam"},{"kind":"text","text":": "},{"text":"Requestable","kind":"typeIdentifier","preciseIdentifier":"s:10Networking11RequestableP"},{"kind":"text","text":") "},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"kind":"text","text":" -> "},{"text":"UploadTask","preciseIdentifier":"s:10Networking10UploadTaskV","kind":"typeIdentifier"}],"type":"topic","title":"upload(_:to:)","kind":"symbol","role":"symbol","url":"\/documentation\/networking\/uploadapimanager\/upload(_:to:)"},"doc://Networking/documentation/Networking/UploadAPIManager/invalidateSession(shouldFinishTasks:)":{"abstract":[],"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/invalidateSession(shouldFinishTasks:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"invalidateSession","kind":"identifier"},{"kind":"text","text":"("},{"text":"shouldFinishTasks","kind":"externalParam"},{"kind":"text","text":": "},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"text":")","kind":"text"}],"type":"topic","title":"invalidateSession(shouldFinishTasks:)","kind":"symbol","role":"symbol","url":"\/documentation\/networking\/uploadapimanager\/invalidatesession(shouldfinishtasks:)"},"doc://Networking/objc(pl)NSObject":{"title":"ObjectiveC.NSObjectProtocol","identifier":"doc:\/\/Networking\/objc(pl)NSObject","type":"unresolvable"},"doc://Networking/documentation/Networking/UploadAPIManaging/StateStream":{"role":"symbol","url":"\/documentation\/networking\/uploadapimanaging\/statestream","abstract":[],"navigatorTitle":[{"text":"StateStream","kind":"identifier"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"StateStream"}],"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging\/StateStream","title":"UploadAPIManaging.StateStream","type":"topic"},"doc://Networking/documentation/Networking/UploadAPIManager/retry(taskId:)":{"abstract":[],"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/retry(taskId:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"retry","kind":"identifier"},{"text":"(","kind":"text"},{"text":"taskId","kind":"externalParam"},{"kind":"text","text":": "},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":") "},{"text":"async","kind":"keyword"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"}],"type":"topic","title":"retry(taskId:)","kind":"symbol","role":"symbol","url":"\/documentation\/networking\/uploadapimanager\/retry(taskid:)"},"doc://Networking/documentation/Networking/UploadTask/State":{"navigatorTitle":[{"text":"State","kind":"identifier"}],"abstract":[{"type":"text","text":"The upload task’s state."}],"kind":"symbol","title":"UploadTask.State","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"State"}],"role":"symbol","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadTask\/State","type":"topic","url":"\/documentation\/networking\/uploadtask\/state"},"doc://Networking/documentation/Networking/UploadAPIManager/URLSessionDataDelegate-Implementations":{"type":"topic","abstract":[],"kind":"article","identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/URLSessionDataDelegate-Implementations","title":"URLSessionDataDelegate Implementations","role":"collectionGroup","url":"\/documentation\/networking\/uploadapimanager\/urlsessiondatadelegate-implementations"},"doc://Networking/s7CVarArgP":{"type":"unresolvable","identifier":"doc:\/\/Networking\/s7CVarArgP","title":"Swift.CVarArg"},"doc://Networking/documentation/Networking":{"type":"topic","title":"Networking","role":"collection","abstract":[],"kind":"symbol","identifier":"doc:\/\/Networking\/documentation\/Networking","url":"\/documentation\/networking"},"doc://Networking/SQ":{"type":"unresolvable","identifier":"doc:\/\/Networking\/SQ","title":"Swift.Equatable"},"doc://Networking/documentation/Networking/UploadAPIManaging":{"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManaging","abstract":[{"text":"A definition of an API layer with methods for handling data uploading.","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"UploadAPIManaging"}],"type":"topic","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"UploadAPIManaging"}],"kind":"symbol","title":"UploadAPIManaging","url":"\/documentation\/networking\/uploadapimanaging"},"doc://Networking/s23CustomStringConvertibleP":{"type":"unresolvable","identifier":"doc:\/\/Networking\/s23CustomStringConvertibleP","title":"Swift.CustomStringConvertible"},"doc://Networking/documentation/Networking/MultipartFormDataEncoding":{"identifier":"doc:\/\/Networking\/documentation\/Networking\/MultipartFormDataEncoding","role":"symbol","navigatorTitle":[{"text":"MultipartFormDataEncoding","kind":"identifier"}],"title":"MultipartFormDataEncoding","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"MultipartFormDataEncoding","kind":"identifier"}],"type":"topic","kind":"symbol","abstract":[],"url":"\/documentation\/networking\/multipartformdataencoding"},"doc://Networking/documentation/Networking/UploadAPIManager/init(urlSessionConfiguration:multipartFormDataEncoder:fileManager:requestAdapters:responseProcessors:errorProcessors:)":{"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager\/init(urlSessionConfiguration:multipartFormDataEncoder:fileManager:requestAdapters:responseProcessors:errorProcessors:)","role":"symbol","title":"init(urlSessionConfiguration:multipartFormDataEncoder:fileManager:requestAdapters:responseProcessors:errorProcessors:)","fragments":[{"kind":"identifier","text":"init"},{"text":"(","kind":"text"},{"text":"urlSessionConfiguration","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSURLSessionConfiguration","text":"URLSessionConfiguration"},{"kind":"text","text":", "},{"text":"multipartFormDataEncoder","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:10Networking25MultipartFormDataEncodingP","text":"MultipartFormDataEncoding"},{"kind":"text","text":", "},{"text":"fileManager","kind":"externalParam"},{"kind":"text","text":": "},{"text":"FileManager","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSFileManager"},{"kind":"text","text":", "},{"kind":"externalParam","text":"requestAdapters"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","preciseIdentifier":"s:10Networking15RequestAdaptingP","text":"RequestAdapting"},{"text":"], ","kind":"text"},{"text":"responseProcessors","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:10Networking18ResponseProcessingP","text":"ResponseProcessing","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"errorProcessors","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:10Networking15ErrorProcessingP","text":"ErrorProcessing","kind":"typeIdentifier"},{"text":"])","kind":"text"}],"type":"topic","kind":"symbol","abstract":[],"url":"\/documentation\/networking\/uploadapimanager\/init(urlsessionconfiguration:multipartformdataencoder:filemanager:requestadapters:responseprocessors:errorprocessors:)"},"doc://Networking/objc(pl)NSURLSessionDelegate":{"title":"Foundation.URLSessionDelegate","type":"unresolvable","identifier":"doc:\/\/Networking\/objc(pl)NSURLSessionDelegate"},"doc://Networking/documentation/Networking/UploadAPIManager":{"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadAPIManager","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"UploadAPIManager","kind":"identifier"}],"type":"topic","navigatorTitle":[{"text":"UploadAPIManager","kind":"identifier"}],"abstract":[{"type":"text","text":"Default upload API manager which is responsible for the creation and management of network file uploads."}],"kind":"symbol","role":"symbol","title":"UploadAPIManager","url":"\/documentation\/networking\/uploadapimanager"},"doc://Networking/objc(cs)NSObject":{"type":"unresolvable","title":"ObjectiveC.NSObject","identifier":"doc:\/\/Networking\/objc(cs)NSObject"},"doc://Networking/documentation/Networking/UploadType":{"identifier":"doc:\/\/Networking\/documentation\/Networking\/UploadType","abstract":[{"type":"text","text":"A type which represents data that can be uploaded."}],"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"text":"UploadType","kind":"identifier"}],"type":"topic","role":"symbol","navigatorTitle":[{"text":"UploadType","kind":"identifier"}],"kind":"symbol","title":"UploadType","url":"\/documentation\/networking\/uploadtype"},"doc://Networking/SH":{"type":"unresolvable","title":"Swift.Hashable","identifier":"doc:\/\/Networking\/SH"},"doc://Networking/s28CustomDebugStringConvertibleP":{"type":"unresolvable","title":"Swift.CustomDebugStringConvertible","identifier":"doc:\/\/Networking\/s28CustomDebugStringConvertibleP"},"doc://Networking/objc(pl)NSURLSessionTaskDelegate":{"type":"unresolvable","title":"Foundation.URLSessionTaskDelegate","identifier":"doc:\/\/Networking\/objc(pl)NSURLSessionTaskDelegate"},"doc://Networking/objc(pl)NSURLSessionDataDelegate":{"type":"unresolvable","title":"Foundation.URLSessionDataDelegate","identifier":"doc:\/\/Networking\/objc(pl)NSURLSessionDataDelegate"}}}